<!DOCTYPE HTML>
<html lang="it">
<head>
<!-- Generated by javadoc (23) on Fri Jun 27 01:40:32 CEST 2025 -->
<title>RMIServer</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2025-06-27">
<meta name="description" content="declaration: module: org.example.galaxy_trucker, package: org.example.galaxy_trucker.ClientServer.RMI, class: RMIServer">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../../../resource-files/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../resource-files/stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../module-summary.html">Module</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../search.html">Search</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="../../../../../module-summary.html">org.example.galaxy_trucker</a></li>
<li><a href="package-summary.html">org.example.galaxy_trucker.ClientServer.RMI</a></li>
<li><a href="RMIServer.html" class="current-selection">RMIServer</a></li>
</ol>
<div class="nav-list-search">
<input type="text" id="search-input" disabled placeholder="Search" aria-label="Search in documentation" autocomplete="off">
<input type="reset" id="reset-search" disabled value="Reset">
</div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;
<input type="text" class="filter-input" disabled placeholder="Filter" aria-label="Filter table of contents" autocomplete="off">
<input type="reset" class="reset-filter" disabled value="Reset">
</div>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span>&#10094;</button><button class="show-sidebar">&#10095;<span>&nbsp;Show sidebar</span></button>
<ol class="toc-list">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#constructor-summary" tabindex="0">Constructor Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#constructor-detail" tabindex="0">Constructor Details</a>
<ol class="toc-list">
<li><a href="#%3Cinit%3E(org.example.galaxy_trucker.ClientServer.GamesHandler,java.util.concurrent.ConcurrentHashMap,java.util.ArrayList)" tabindex="0">RMIServer(GamesHandler, ConcurrentHashMap, ArrayList)</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#StartServer()" tabindex="0">StartServer()</a></li>
<li><a href="#receivePong(org.example.galaxy_trucker.ClientServer.RMI.ClientInterface)" tabindex="0">receivePong(ClientInterface)</a></li>
<li><a href="#command(org.example.galaxy_trucker.Commands.Command)" tabindex="0">command(Command)</a></li>
<li><a href="#run()" tabindex="0">run()</a></li>
<li><a href="#sendEvent(org.example.galaxy_trucker.ClientServer.Messages.LobbyEvent)" tabindex="0">sendEvent(LobbyEvent)</a></li>
<li><a href="#updateLobby(org.example.galaxy_trucker.ClientServer.Messages.LobbyEvent)" tabindex="0">updateLobby(LobbyEvent)</a></li>
<li><a href="#quitPlayer(org.example.galaxy_trucker.Commands.QuitCommand)" tabindex="0">quitPlayer(QuitCommand)</a></li>
<li><a href="#addPending(java.lang.String)" tabindex="0">addPending(String)</a></li>
<li><a href="#reconnectPlayer(java.lang.String)" tabindex="0">reconnectPlayer(String)</a></li>
</ol>
</li>
</ol>
</nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class RMIServer" class="title">Class RMIServer</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/RemoteObject.html" title="class or interface in java.rmi.server" class="external-link">java.rmi.server.RemoteObject</a>
<div class="inheritance"><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/RemoteServer.html" title="class or interface in java.rmi.server" class="external-link">java.rmi.server.RemoteServer</a>
<div class="inheritance"><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/UnicastRemoteObject.html" title="class or interface in java.rmi.server" class="external-link">java.rmi.server.UnicastRemoteObject</a>
<div class="inheritance">org.example.galaxy_trucker.ClientServer.RMI.RMIServer</div>
</div>
</div>
</div>
</div>
<section class="class-description" id="class-description">
<div class="horizontal-scroll">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a></code>, <code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/Remote.html" title="class or interface in java.rmi" class="external-link">Remote</a></code>, <code><a href="ServerInterface.html" title="interface in org.example.galaxy_trucker.ClientServer.RMI">ServerInterface</a></code>, <code><a href="../../Controller/Listeners/GhListener.html" title="interface in org.example.galaxy_trucker.Controller.Listeners">GhListener</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">RMIServer</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/UnicastRemoteObject.html" title="class or interface in java.rmi.server" class="external-link">UnicastRemoteObject</a>
implements <a href="ServerInterface.html" title="interface in org.example.galaxy_trucker.ClientServer.RMI">ServerInterface</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a>, <a href="../../Controller/Listeners/GhListener.html" title="interface in org.example.galaxy_trucker.Controller.Listeners">GhListener</a></span></div>
<div class="block">The RMIServer class is responsible for implementing remote server-side functionalities
 using the RMI (Remote Method Invocation) mechanism. It handles client-server communication,
 manages client connections, supports remote method execution, and monitors client health
 through periodic ping checks.

 This class extends UnicastRemoteObject and implements the following interfaces:
 - ServerInterface: Provides server methods to interact with RMI clients.
 - Runnable: Allows the server to run concurrently.
 - GhListener: Allows listening and reacting to events in the GamesHandler.

 Responsibilities:
 - Manages client connections, including registration and disconnection handling.
 - Implements a ping mechanism to monitor client connectivity.
 - Synchronizes client data with the server and manages concurrent client actions.
 - Facilitates communication with clients through remote method calls.
 - Manages game-related events and maintains a virtual view for clients.

 Constructor:
 - RMIServer: Initializes the server with given GamesHandler, token map, and disconnected clients list.

 Methods:
 - StartServer: Configures and starts the RMI registry and binds server methods.
 - receivePong: Receives a pong response from a client, updating the last ping time.
 - command: Processes commands received from clients, including login and lobby events.
 - handleDisconnection: Handles the disconnection of a client, updating server state and attempting to recover.
 - startTimeoutChecker: Monitors client activity and detects timeouts for inactive clients.

 Thread Safety:
 - Uses thread-safe data structures (e.g., ConcurrentHashMap) and synchronization blocks to manage concurrent operations.

 Dependencies:
 - GamesHandler: Manages game logic and player data.
 - ClientInterface: Defines methods for client communication.
 - VirtualView: Represents client-specific game views.
 - LobbyEvent: Represents events in the game lobby.
 - Command: Represents client commands handled by the server.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../../serialized-form.html#org.example.galaxy_trucker.ClientServer.RMI.RMIServer">Serialized Form</a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.example.galaxy_trucker.ClientServer.GamesHandler,java.util.concurrent.ConcurrentHashMap,java.util.ArrayList)" class="member-name-link">RMIServer</a><wbr>(<a href="../GamesHandler.html" title="class in org.example.galaxy_trucker.ClientServer">GamesHandler</a>&nbsp;gamesHandler,
 <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentHashMap</a>&lt;<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../../Controller/VirtualView.html" title="class in org.example.galaxy_trucker.Controller">VirtualView</a>&gt;&nbsp;tokenMap,
 <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;DisconnectedClients)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructs a new RMIServer instance and initializes the server with the given parameters.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addPending(java.lang.String)" class="member-name-link">addPending</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;token)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds a token to the pending list and performs actions to move the token from
 pending to active clients if the token already exists in the pending map.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#command(org.example.galaxy_trucker.Commands.Command)" class="member-name-link">command</a><wbr>(<a href="../../Commands/Command.html" title="class in org.example.galaxy_trucker.Commands">Command</a>&nbsp;cmd)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Processes a command received from the client.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#quitPlayer(org.example.galaxy_trucker.Commands.QuitCommand)" class="member-name-link">quitPlayer</a><wbr>(<a href="../../Commands/QuitCommand.html" title="class in org.example.galaxy_trucker.Commands">QuitCommand</a>&nbsp;event)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Removes a client from the list of active clients when they quit the game.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#receivePong(org.example.galaxy_trucker.ClientServer.RMI.ClientInterface)" class="member-name-link">receivePong</a><wbr>(<a href="ClientInterface.html" title="interface in org.example.galaxy_trucker.ClientServer.RMI">ClientInterface</a>&nbsp;clientInterface)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Handles the reception of a pong message from a client for connection monitoring.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#reconnectPlayer(java.lang.String)" class="member-name-link">reconnectPlayer</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;token)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Reconnects a player to the game session using their unique token.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#run()" class="member-name-link">run</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Entrypoint for running the RMI server.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#sendEvent(org.example.galaxy_trucker.ClientServer.Messages.LobbyEvent)" class="member-name-link">sendEvent</a><wbr>(<a href="../Messages/LobbyEvent.html" title="class in org.example.galaxy_trucker.ClientServer.Messages">LobbyEvent</a>&nbsp;event)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sends a lobby event to all connected clients.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#StartServer()" class="member-name-link">StartServer</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Starts the RMI server and binds it to a specified name and port defined in the Settings class.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateLobby(org.example.galaxy_trucker.ClientServer.Messages.LobbyEvent)" class="member-name-link">updateLobby</a><wbr>(<a href="../Messages/LobbyEvent.html" title="class in org.example.galaxy_trucker.ClientServer.Messages">LobbyEvent</a>&nbsp;event)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates the state of the lobby based on the provided LobbyEvent.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.rmi.server.UnicastRemoteObject">Methods inherited from class&nbsp;java.rmi.server.<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/UnicastRemoteObject.html" title="class or interface in java.rmi.server" class="external-link">UnicastRemoteObject</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/UnicastRemoteObject.html#clone()" title="class or interface in java.rmi.server" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/UnicastRemoteObject.html#exportObject(java.rmi.Remote)" title="class or interface in java.rmi.server" class="external-link">exportObject</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/UnicastRemoteObject.html#exportObject(java.rmi.Remote,int)" title="class or interface in java.rmi.server" class="external-link">exportObject</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/UnicastRemoteObject.html#exportObject(java.rmi.Remote,int,java.io.ObjectInputFilter)" title="class or interface in java.rmi.server" class="external-link">exportObject</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/UnicastRemoteObject.html#exportObject(java.rmi.Remote,int,java.rmi.server.RMIClientSocketFactory,java.rmi.server.RMIServerSocketFactory)" title="class or interface in java.rmi.server" class="external-link">exportObject</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/UnicastRemoteObject.html#exportObject(java.rmi.Remote,int,java.rmi.server.RMIClientSocketFactory,java.rmi.server.RMIServerSocketFactory,java.io.ObjectInputFilter)" title="class or interface in java.rmi.server" class="external-link">exportObject</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/UnicastRemoteObject.html#unexportObject(java.rmi.Remote,boolean)" title="class or interface in java.rmi.server" class="external-link">unexportObject</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.rmi.server.RemoteServer">Methods inherited from class&nbsp;java.rmi.server.<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/RemoteServer.html" title="class or interface in java.rmi.server" class="external-link">RemoteServer</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/RemoteServer.html#getClientHost()" title="class or interface in java.rmi.server" class="external-link">getClientHost</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/RemoteServer.html#getLog()" title="class or interface in java.rmi.server" class="external-link">getLog</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/RemoteServer.html#setLog(java.io.OutputStream)" title="class or interface in java.rmi.server" class="external-link">setLog</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.rmi.server.RemoteObject">Methods inherited from class&nbsp;java.rmi.server.<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/RemoteObject.html" title="class or interface in java.rmi.server" class="external-link">RemoteObject</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/RemoteObject.html#equals(java.lang.Object)" title="class or interface in java.rmi.server" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/RemoteObject.html#getRef()" title="class or interface in java.rmi.server" class="external-link">getRef</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/RemoteObject.html#hashCode()" title="class or interface in java.rmi.server" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/RemoteObject.html#toString()" title="class or interface in java.rmi.server" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/server/RemoteObject.html#toStub(java.rmi.Remote)" title="class or interface in java.rmi.server" class="external-link">toStub</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(org.example.galaxy_trucker.ClientServer.GamesHandler,java.util.concurrent.ConcurrentHashMap,java.util.ArrayList)">
<h3>RMIServer</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">RMIServer</span><wbr><span class="parameters">(<a href="../GamesHandler.html" title="class in org.example.galaxy_trucker.ClientServer">GamesHandler</a>&nbsp;gamesHandler,
 <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentHashMap</a>&lt;<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="../../Controller/VirtualView.html" title="class in org.example.galaxy_trucker.Controller">VirtualView</a>&gt;&nbsp;tokenMap,
 <a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;DisconnectedClients)</span>
          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/RemoteException.html" title="class or interface in java.rmi" class="external-link">RemoteException</a></span></div>
<div class="block">Constructs a new RMIServer instance and initializes the server with the given parameters.
 Configures the maps and lists used for handling clients and server functionality.
 Sets up the necessary components for managing client-server communication, including timeout checking
 and game management through the GamesHandler.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>gamesHandler</code> - the handler used to manage games and player interactions.</dd>
<dd><code>tokenMap</code> - a concurrent map that associates a client's token with their corresponding VirtualView.</dd>
<dd><code>DisconnectedClients</code> - a list tracking tokens of clients that have been disconnected from the server.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/RemoteException.html" title="class or interface in java.rmi" class="external-link">RemoteException</a></code> - if a communication-related exception occurs during the initialization.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="StartServer()">
<h3>StartServer</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">StartServer</span>()
                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/RemoteException.html" title="class or interface in java.rmi" class="external-link">RemoteException</a></span></div>
<div class="block">Starts the RMI server and binds it to a specified name and port defined in the Settings class.
 The method configures the server's hostname and initializes a new RMI registry on the defined port.

 It then binds a remote object to the name "CommandReader", enabling clients to interact with
 the server using that registry name. If binding fails due to an exception, it will log the
 exception stack trace.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ServerInterface.html#StartServer()">StartServer</a></code>&nbsp;in interface&nbsp;<code><a href="ServerInterface.html" title="interface in org.example.galaxy_trucker.ClientServer.RMI">ServerInterface</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/RemoteException.html" title="class or interface in java.rmi" class="external-link">RemoteException</a></code> - if there are any issues in creating the registry or binding the object.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="receivePong(org.example.galaxy_trucker.ClientServer.RMI.ClientInterface)">
<h3>receivePong</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">receivePong</span><wbr><span class="parameters">(<a href="ClientInterface.html" title="interface in org.example.galaxy_trucker.ClientServer.RMI">ClientInterface</a>&nbsp;clientInterface)</span>
                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/RemoteException.html" title="class or interface in java.rmi" class="external-link">RemoteException</a></span></div>
<div class="block">Handles the reception of a pong message from a client for connection monitoring.
 This method updates the last known activity timestamp for the given client interface.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ServerInterface.html#receivePong(org.example.galaxy_trucker.ClientServer.RMI.ClientInterface)">receivePong</a></code>&nbsp;in interface&nbsp;<code><a href="ServerInterface.html" title="interface in org.example.galaxy_trucker.ClientServer.RMI">ServerInterface</a></code></dd>
<dt>Parameters:</dt>
<dd><code>clientInterface</code> - the client interface instance sending the pong message. It is used
                        to identify and track the client's connection status.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/RemoteException.html" title="class or interface in java.rmi" class="external-link">RemoteException</a></code> - if a communication-related exception occurs during the remote method call.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="command(org.example.galaxy_trucker.Commands.Command)">
<h3>command</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">command</span><wbr><span class="parameters">(<a href="../../Commands/Command.html" title="class in org.example.galaxy_trucker.Commands">Command</a>&nbsp;cmd)</span>
             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/RemoteException.html" title="class or interface in java.rmi" class="external-link">RemoteException</a></span></div>
<div class="block">Processes a command received from the client. Depending on the command type, this method performs
 appropriate actions such as handling lobby connections, login requests, and reconnection attempts.
 For unknown command types, the request is forwarded to the game handler.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="ServerInterface.html#command(org.example.galaxy_trucker.Commands.Command)">command</a></code>&nbsp;in interface&nbsp;<code><a href="ServerInterface.html" title="interface in org.example.galaxy_trucker.ClientServer.RMI">ServerInterface</a></code></dd>
<dt>Parameters:</dt>
<dd><code>cmd</code> - the command received containing client information, command title, and associated data.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/RemoteException.html" title="class or interface in java.rmi" class="external-link">RemoteException</a></code> - if a remote communication error occurs while processing the command.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="run()">
<h3>run</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">run</span>()</div>
<div class="block">Entrypoint for running the RMI server. This method attempts to start the server by invoking
 the <a href="#StartServer()"><code>StartServer()</code></a> method. If an exception occurs during server startup, it catches
 the exception and logs an error message indicating that the server failed to start, along
 with the exception's message.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Runnable.html#run()" title="class or interface in java.lang" class="external-link">run</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a></code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="sendEvent(org.example.galaxy_trucker.ClientServer.Messages.LobbyEvent)">
<h3>sendEvent</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">sendEvent</span><wbr><span class="parameters">(<a href="../Messages/LobbyEvent.html" title="class in org.example.galaxy_trucker.ClientServer.Messages">LobbyEvent</a>&nbsp;event)</span></div>
<div class="block">Sends a lobby event to all connected clients.
 Updates the lobby event map with the given event, removes disconnected clients,
 and sends the event to active clients. The method uses an asynchronous task
 to send events and handles any disconnection or timeout issues.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../Controller/Listeners/GhListener.html#sendEvent(org.example.galaxy_trucker.ClientServer.Messages.LobbyEvent)">sendEvent</a></code>&nbsp;in interface&nbsp;<code><a href="../../Controller/Listeners/GhListener.html" title="interface in org.example.galaxy_trucker.Controller.Listeners">GhListener</a></code></dd>
<dt>Parameters:</dt>
<dd><code>event</code> - the lobby event to be sent. This includes information such as
              the game ID, level, maximum number of players, and current players in the lobby.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="updateLobby(org.example.galaxy_trucker.ClientServer.Messages.LobbyEvent)">
<h3>updateLobby</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateLobby</span><wbr><span class="parameters">(<a href="../Messages/LobbyEvent.html" title="class in org.example.galaxy_trucker.ClientServer.Messages">LobbyEvent</a>&nbsp;event)</span></div>
<div class="block">Updates the state of the lobby based on the provided LobbyEvent.
 This method processes a lobby-related event, allowing modifications to the
 current state of the lobby such as updating the list of players, lobby level,
 or maximum number of players.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../Controller/Listeners/GhListener.html#updateLobby(org.example.galaxy_trucker.ClientServer.Messages.LobbyEvent)">updateLobby</a></code>&nbsp;in interface&nbsp;<code><a href="../../Controller/Listeners/GhListener.html" title="interface in org.example.galaxy_trucker.Controller.Listeners">GhListener</a></code></dd>
<dt>Parameters:</dt>
<dd><code>event</code> - the LobbyEvent instance containing information about the game lobby,
              such as the game ID, level, maximum number of players, and the list
              of players currently in the lobby</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="quitPlayer(org.example.galaxy_trucker.Commands.QuitCommand)">
<h3>quitPlayer</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">quitPlayer</span><wbr><span class="parameters">(<a href="../../Commands/QuitCommand.html" title="class in org.example.galaxy_trucker.Commands">QuitCommand</a>&nbsp;event)</span></div>
<div class="block">Removes a client from the list of active clients when they quit the game.
 This method is triggered by the QuitCommand and ensures thread-safe removal
 of the client from the shared list of clients.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../Controller/Listeners/GhListener.html#quitPlayer(org.example.galaxy_trucker.Commands.QuitCommand)">quitPlayer</a></code>&nbsp;in interface&nbsp;<code><a href="../../Controller/Listeners/GhListener.html" title="interface in org.example.galaxy_trucker.Controller.Listeners">GhListener</a></code></dd>
<dt>Parameters:</dt>
<dd><code>event</code> - the QuitCommand event containing the client to be removed from the active clients list</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="addPending(java.lang.String)">
<h3>addPending</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addPending</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;token)</span></div>
<div class="block">Adds a token to the pending list and performs actions to move the token from
 pending to active clients if the token already exists in the pending map.

 If the token exists in the pending map, it removes the token, notifies the client
 by invoking the <code>receiveToken</code> method, and then moves the client to the active clients map.

 If the client fails to receive the token due to a RemoteException, an error message
 is printed.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>token</code> - the unique identifier associated with a client that is being added
              to the pending map or transitioned to the active clients list.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="reconnectPlayer(java.lang.String)">
<h3>reconnectPlayer</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">reconnectPlayer</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;token)</span>
                     throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/RemoteException.html" title="class or interface in java.rmi" class="external-link">RemoteException</a></span></div>
<div class="block">Reconnects a player to the game session using their unique token. The method attempts
 to reintegrate the player's connection to the server by invoking the game handler's
 reconnection logic. This operation is performed asynchronously on a separate thread.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>token</code> - the unique identifier associated with the player attempting to reconnect.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/23/docs/api/java.rmi/java/rmi/RemoteException.html" title="class or interface in java.rmi" class="external-link">RemoteException</a></code> - if a communication-related exception occurs during player reconnection.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</body>
</html>
